<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>CanterPro</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
  body {
    margin: 0;
    font-family: Arial, sans-serif;
    background: #f2f4f7;
  }

  .hidden {
    display: none;
  }

  .screen {
    padding: 16px;
  }

  .center {
    display: flex;
    flex-direction: column;
    justify-content: center;
    height: 100vh;
  }

  .card {
    background: white;
    border-radius: 16px;
    padding: 20px;
    margin-bottom: 16px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
  }

  .btn {
    padding: 18px;
    border-radius: 18px;
    border: none;
    font-size: 18px;
    font-weight: bold;
    cursor: pointer;
    width: 100%;
  }

  .btn-primary {
    background: #1976d2;
    color: white;
  }

  .btn-secondary {
    background: #e0e0e0;
  }

  /* –¢–ê–ë–´ –°–í–ï–†–•–£ */
  .tabs {
    display: flex;
    gap: 8px;
    margin-bottom: 16px;
  }

  .tab {
    flex: 1;
    padding: 14px;
    border-radius: 14px;
    text-align: center;
    font-weight: bold;
    cursor: pointer;
    background: #e0e0e0;
  }

  .tab.active {
    background: #1976d2;
    color: white;
  }

  .tab.work { background: #c8e6c9; }
  .tab.orders { background: #bbdefb; }
  .tab.costs { background: #ffe0b2; }

  .tab.active.work { background: #388e3c; color: white; }
  .tab.active.orders { background: #1976d2; color: white; }
  .tab.active.costs { background: #f57c00; color: white; }

  h2, h3 {
    margin-top: 0;
  }

  .muted {
    color: #666;
    font-size: 14px;
  }
</style>
</head>

<body>

<!-- –°–¢–ê–†–¢–û–í–´–ô –≠–ö–†–ê–ù -->
<div id="startScreen" class="screen center">
  <div class="card">
    <h2>–î–æ–±—Ä–æ–µ —É—Ç—Ä–æ üëã</h2>
    <p class="muted">–ù–∞–∂–º–∏—Ç–µ, —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å —Ä–∞–±–æ—á–∏–π –¥–µ–Ω—å</p>
    <button class="btn btn-primary" onclick="startWorkDay()">–ù–∞—á–∞—Ç—å —Ä–∞–±–æ—á–∏–π –¥–µ–Ω—å</button>
  </div>

  <div class="card">
    <button class="btn btn-secondary" onclick="openAnalyticsOnly()">
      –†–∞–±–æ—Ç–∞ —Å –æ—Ç—á–µ—Ç–∞–º–∏ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–æ–π
    </button>
  </div>
</div>

<!-- –û–°–ù–û–í–ù–û–ô –≠–ö–†–ê–ù -->
<div id="mainScreen" class="screen hidden">

  <!-- –¢–ê–ë–´ -->
  <div class="tabs">
    <div id="tabWork" class="tab work active" onclick="showTab('work')">
      –†–∞–±–æ—á–∏–π –¥–µ–Ω—å
    </div>
    <div id="tabOrders" class="tab orders" onclick="showTab('orders')">
      –ó–∞–∫–∞–∑—ã
    </div>
    <div id="tabCosts" class="tab costs" onclick="showTab('costs')">
      –†–∞—Å—Ö–æ–¥—ã –∑–∞ –¥–µ–Ω—å
    </div>
  </div>

  <!-- –†–ê–ë–û–ß–ò–ô –î–ï–ù–¨ -->
  <div id="workTab">
    <div class="card">
      <h3>–†–∞–±–æ—á–∏–π –¥–µ–Ω—å –∞–∫—Ç–∏–≤–µ–Ω</h3>
      <p class="muted" id="startTimeText"></p>
      <button class="btn btn-primary" onclick="finishWorkDay()">
        –ó–∞–≤–µ—Ä—à–∏—Ç—å —Ä–∞–±–æ—á–∏–π –¥–µ–Ω—å
      </button>
    </div>

    <div class="card">
      <h3>–ü—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–π –æ—Ç—á–µ—Ç</h3>
      <p class="muted">
        –ó–¥–µ—Å—å –±—É–¥–µ—Ç —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –æ—Ç—á–µ—Ç –∑–∞ –¥–µ–Ω—å<br>
        (–∑–∞–∫–∞–∑—ã, —Ä–∞—Å—Ö–æ–¥—ã, –ø—Ä–æ–±–µ–≥, –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è)
      </p>
    </div>
  </div>

  <!-- –ó–ê–ö–ê–ó–´ (–ü–û–ö–ê –ó–ê–ì–õ–£–®–ö–ê) -->
  <div id="ordersTab" class="hidden">
    <div class="card">
      <h3>–ó–∞–∫–∞–∑—ã</h3>
      <p class="muted">
        –í–∫–ª–∞–¥–∫–∞ –∑–∞–∫–∞–∑–æ–≤ –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è –¥–∞–ª–µ–µ
      </p>
    </div>
  </div>

  <!-- –†–ê–°–•–û–î–´ (–ü–û–ö–ê –ó–ê–ì–õ–£–®–ö–ê) -->
  <div id="costsTab" class="hidden">
    <div class="card">
      <h3>–†–∞—Å—Ö–æ–¥—ã –∑–∞ –¥–µ–Ω—å</h3>
      <p class="muted">
        –ó–∞–ø—Ä–∞–≤–∫–∏, –≤–µ–±–∞—Å—Ç–æ, –ø—Ä–æ—á–∏–µ —Ä–∞—Å—Ö–æ–¥—ã
      </p>
    </div>
  </div>

</div>

<script>
function startWorkDay() {
  const shift = {
    startTime: Date.now(),
    date: new Date().toISOString().slice(0,10),
    status: "open"
  };
  localStorage.setItem("currentShift", JSON.stringify(shift));
  showMainScreen();
}

function finishWorkDay() {
  const shift = JSON.parse(localStorage.getItem("currentShift"));
  shift.endTime = Date.now();
  shift.status = "closed";
  localStorage.setItem("lastShift", JSON.stringify(shift));
  localStorage.removeItem("currentShift");

  alert("–†–∞–±–æ—á–∏–π –¥–µ–Ω—å –∑–∞–≤–µ—Ä—à—ë–Ω");
  location.reload();
}

function openAnalyticsOnly() {
  alert("–†–µ–∂–∏–º –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω –ø–æ–∑–∂–µ");
}

function showMainScreen() {
  document.getElementById("startScreen").classList.add("hidden");
  document.getElementById("mainScreen").classList.remove("hidden");

  const shift = JSON.parse(localStorage.getItem("currentShift"));
  const d = new Date(shift.startTime);
  document.getElementById("startTimeText").innerText =
    "–ù–∞—á–∞–ª–æ: " + d.toLocaleDateString() + " " + d.toLocaleTimeString();
}

function showTab(tab) {
  document.getElementById("workTab").classList.add("hidden");
  document.getElementById("ordersTab").classList.add("hidden");
  document.getElementById("costsTab").classList.add("hidden");

  document.getElementById("tabWork").classList.remove("active");
  document.getElementById("tabOrders").classList.remove("active");
  document.getElementById("tabCosts").classList.remove("active");

  if (tab === "work") {
    document.getElementById("workTab").classList.remove("hidden");
    document.getElementById("tabWork").classList.add("active");
  }
  if (tab === "orders") {
    document.getElementById("ordersTab").classList.remove("hidden");
    document.getElementById("tabOrders").classList.add("active");
  }
  if (tab === "costs") {
    document.getElementById("costsTab").classList.remove("hidden");
    document.getElementById("tabCosts").classList.add("active");
  }
}

window.onload = () => {
  const shift = localStorage.getItem("currentShift");
  if (shift) {
    showMainScreen();
  }
};
</script>

</body>
</html>
